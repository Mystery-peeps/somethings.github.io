<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>D!no</title>
  <style>
    #game {
      width: 1000px;
      height: 400px;
      position: relative;
      background-color: black;
      overflow: hidden;
    }
    #character {
      width: 20px;
      height: 50px;
      background-color: green;
      position: absolute;
      top: 130px;
      left: 20px;
    }
    #block {
      width: 20px;
      height: 30px;
      background-color: red;
      position: absolute;
      top: 150px;
      left: 500px;
      animation: move 2s infinite linear;
    }
    #score {
      left: 0px;
    }
    @keyframes move {
      0% { left: 500px; }
      100% { left: -20px; }
    }
    .animate {
      animation: jump 0.5s;
    }
    @keyframes jump {
      0% { top: 130px; }
      50% { top: 50px; }
      100% { top: 130px; }
    }
  </style>
</head>
<body onclick="jump()">
  <div id="game">
    <div id="character"></div>
    <div id="block"></div>
    <p id="score"></p>
  </div>

  <script>
    var character = document.getElementById("character");
    var block = document.getElementById("block");
    var score = 0;
    var canScore = true;

    function jump() {
      if (!character.classList.contains("animate")) {
        character.classList.add("animate");
        setTimeout(() => character.classList.remove("animate"), 500);
      }
    }

    var checkDead = setInterval(() => {
      var characterTop = parseInt(window.getComputedStyle(character).getPropertyValue("top"));
      var blockLeft = parseInt(window.getComputedStyle(block).getPropertyValue("left"));

      // collision detection
      if (blockLeft < 40 && blockLeft > 0 && characterTop >= 130) {
        block.style.animation = "none";
        alert("U Lose");
        score = 0;
        // reset block position for replay
        block.style.left = "500px";
        block.style.display = "block";
        block.style.animation = "move 2s infinite linear";
      }
      if (blockLeft < 10 && blockLeft > 0) {
        if (canScore == true) {
          score += 1;
          canScore = false;
        }
      }
      if (blockLeft < 50) {
        canScore = true;
      }
      document.getElementById("score").innerHTML = Math.round(score);
    }, 10);
  </script>
</body>
</html>
